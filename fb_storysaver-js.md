---
title: "Fb_storySaver.Js"
date: "2023-11-23"
categories: 
  - "useful-script-en"
---

how to add bookmarklet in chrome  
![](https://camo.githubusercontent.com/5f21e427a7d3ee887313a4f9b1ab033e6462db47ca299bf3f7e2d81a0ce854bd/68747470733a2f2f696d672e7765626e6f74732e636f6d2f323031392f30342f447261672d616e642d44726f702d4c696e6b732d696e2d4368726f6d652e706e67)`export default { icon: "https://lh3.googleusercontent.com/e8gqesNOLhN-0xivFcaAlwGaoftfxEJcZXcXJ1F2bhoqrozs3mCYgLhPC0qJ9izdGYRnHwfXegimH9fjj3IBwlby9ZA=w128-h128-e365-rj-sc0x00ffffff", name: { en: "Download watching fb Story", vi: "Download facebook story that you are watching",  vi: "Download facebook story you are viewing",  },  onClick: function() { / / Source code extracted from: https://chrome.google.com/webstore/detail/story-saver/mafcolokinicfdmlidhaebadidhdehpk  let videos = document.querySelectorAll("video"); let listUrls = [];  for (var i = videos.length – 1; i >= 0; i–) { if (videos[i].offsetHeight === 0) continue; var reactKey = ""; keys = Object.keys(videos[i]); for (var j = 0; j < keys.length; j++) { if (keys[j].indexOf("__reactFiber") != -1) { reactKey = keys[j].split("__reactFiber")[1]; Break; } } let storyUrl; try { prettier-ignore storyUrl = videos[i].parentElement.parentElement.parentElement.parentElement.parentElement['__reactProps' + reactKey].children[0].props.children.props.implementations[1].data.hdSrc; } catch (e) {} if (storyUrl == null) { try { prettier-ignore storyUrl = videos[i].parentElement.parentElement.parentElement.parentElement.parentElement['__reactProps' + reactKey].children[0].props.children.props.implementations[1].data.sdSrc; } catch (e) {} } if (storyUrl == null) { try { prettier-ignore storyUrl = videos[i].parentElement.parentElement.parentElement.parentElement['__reactProps' + reactKey].children.props.children.props.implementations[1].data.hdSrc; } catch (e) {} } if (storyUrl == null) { try { prettier-ignore storyUrl = videos[i].parentElement.parentElement.parentElement.parentElement.parentElement['__reactProps' + reactKey].children.props.children.props.implementations[1].data.sdSrc; } catch (e) {} } if (storyUrl == null) { try { prettier-ignore storyUrl = videos[i]['__reactFiber' + reactKey].return.stateNode.props.videoData.$1.hd_src; } catch (e) {} } if (storyUrl == null) { try { prettier-ignore storyUrl = videos[i]['__reactFiber' + reactKey].return.stateNode.props.videoData.$1.sd_src; } catch (e) {} } if (storyUrl != null) { listUrls.push({ url: storyUrl, type: "video" }); } } let storyImgUrl = Array.from( document.querySelectorAll('div[data-id] img[draggable="false"]') ).find((_) => _.alt)?. Src; if (storyImgUrl) { listUrls.push({ url: storyImgUrl, type: "img" }); }  if (!listUrls.length) { alert("No facebook story found in the site."); } else if(listUrls.length === 1) { UsefulScriptGlobalPageContext.Utils.downloadURL( listUrls[0].url, "fb_story_video.mp4" ); } else {  let w = window.open("", "", "", "width=500,height =700" );  w.document.write( listUrls .map(({ url, type }) => type === "video" ? '' : type === "img" ? ''![](https://naturelovers.15w.xyz/blog/fb_storysaver-js/$%7Burl%7D)  : ""  ) . join(" ") ); } }, };`
