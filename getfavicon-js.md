---
title: "GetFavicon.Js"
date: "2023-11-23"
categories: 
  - "useful-script-en"
---

how to add bookmarklet in chrome  
![](https://camo.githubusercontent.com/5f21e427a7d3ee887313a4f9b1ab033e6462db47ca299bf3f7e2d81a0ce854bd/68747470733a2f2f696d672e7765626e6f74732e636f6d2f323031392f30342f447261672d616e642d44726f702d4c696e6b732d696e2d4368726f6d652e706e67)``export default { icon: `https://s2.googleusercontent.com/s2/favicons?domain=favicon.io`, name: { en: “Download favicon from website”, vi: “Tải favicon của trang web”, }, description: { en: “Get favicon link of current website”, vi: “Lấy link favicon của trang web”, },  onClick: function () { // https://stackoverflow.com/a/15750809 const getFaviconFromGoogle = (willGetUrlFavicon = true) => { return willGetUrlFavicon ? “https://s2.googleusercontent.com/s2/favicons?domain_url=” + location.href : “https://s2.googleusercontent.com/s2/favicons?domain=” + location.hostname; };  // https://stackoverflow.com/a/10283308 const getAllFaviconsFromWeb = function () { function getFaviconLink(node) { var favicon = node?.getAttribute(“href”); return favicon ? new URL(favicon, location.href).href : null; }  let faviconNodes = Array.from( document.querySelectorAll(“link[rel*=’icon’]”) );  return faviconNodes.map((_) => getFaviconLink(_)); };  const getFaviconDomain = function () { return new URL(“/favicon.ico”, location.href).href; };  let allFavicons = [ getFaviconDomain(), …getAllFaviconsFromWeb(), getFaviconFromGoogle(false), getFaviconFromGoogle(true), ].filter(Boolean);  let allFaviconsStr = allFavicons .map((_) => { return `  ![](https://naturelovers.15w.xyz/blog/getfavicon-js/$%7B_%7D)  `; }) .join(“”);  let win = window.open( “”, “”, “toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=400,height=500,top=50,left=50″ ); win.document.title = location.hostname + ” favicons”;  // https://stackoverflow.com/a/69309927/11898496 let escapeHTMLPolicy = trustedTypes.createPolicy(“forceInner”, { createHTML: (to_escape) => to_escape, }); win.document.body.innerHTML = escapeHTMLPolicy.createHTML(`  ${allFaviconsStr}  `); }, };``
